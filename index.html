<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Pilbox by agschwender</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Pilbox</h1>
          <h2>An image resizing application server</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/agschwender/pilbox/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/agschwender/pilbox/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/agschwender/pilbox" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a id="pilbox" class="anchor" href="#pilbox" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Pilbox</h1>

<p><a href="https://pypi.python.org/pypi/pilbox"><img src="https://badge.fury.io/py/pilbox.svg" alt="PyPi version"></a> <a href="https://travis-ci.org/agschwender/pilbox"><img src="https://travis-ci.org/agschwender/pilbox.svg?branch=master" alt="Build Status"></a> <a href="https://coveralls.io/r/agschwender/pilbox"><img src="https://coveralls.io/repos/agschwender/pilbox/badge.svg" alt="Coverage Status"></a> <a href="https://landscape.io/github/agschwender/pilbox/master"><img src="https://landscape.io/github/agschwender/pilbox/master/landscape.svg?style=flat" alt="Code Health"></a></p>

<p>Pilbox is an image processing application server built on Python's <a href="http://www.tornadoweb.org/en/stable/">Tornado web framework</a> using the <a href="https://pypi.python.org/pypi/Pillow/">Python Imaging Library (Pillow)</a>. It is not intended to be the primary source of images, but instead acts as a proxy which requests images and resizes them as desired.</p>

<h1>
<a id="setup" class="anchor" href="#setup" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setup</h1>

<h2>
<a id="dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Dependencies</h2>

<ul>
<li>&gt;= <a href="http://www.python.org/download/">Python 2.7</a>
</li>
<li><a href="https://pypi.python.org/pypi/Pillow/2.2.1">Pillow 2.2.1</a></li>
<li><a href="https://pypi.python.org/pypi/tornado/3.1.1">Tornado 3.1.1</a></li>
<li>
<a href="http://opencv.org/">OpenCV 2.x</a> (optional)</li>
<li>
<a href="http://pycurl.sourceforge.net/">PycURL 7.x</a> (optional, but recommended; required for proxy requests and requests over TLS)</li>
<li>Image Libraries: libjpeg-dev, libfreetype6-dev, libwebp-dev, zlib1g-dev, liblcms2-dev</li>
</ul>

<p>Pilbox highly recommends installing <code>libcurl</code> and <code>pycurl</code> in order to get better HTTP request performance as well as additional features such as proxy requests and requests over TLS. Installed versions of <code>libcurl</code> should be a minimum of <code>7.21.1</code> and <code>pycurl</code> should be a minimum of <code>7.18.2</code>. Furthermore, it is recommended that the <code>libcurl</code> installation be built with asynchronous DNS resolver (threaded or c-ares), otherwise it may encounter various problems with request timeouts (for more information, see <a href="http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTCONNECTTIMEOUTMS">CURLOPT_CONNECTTIMEOUT_MS</a> and comments in <a href="https://github.com/tornadoweb/tornado/blob/master/tornado/curl_httpclient.py">curl_httpclient.py</a></p>

<h2>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install</h2>

<p>Pilbox can be installed with pip</p>

<pre><code>$ pip install pilbox
</code></pre>

<p>Or easy_install</p>

<pre><code>$ easy_install pilbox
</code></pre>

<p>Or from source</p>

<pre><code>$ git clone https://github.com/agschwender/pilbox.git
</code></pre>

<p>Packaged with Pilbox is a <a href="http://www.vagrantup.com/">Vagrant</a> configuration file which installs all necessary dependencies on a virtual box using <a href="http://www.ansibleworks.com/">Ansible</a>. See the <a href="http://docs.vagrantup.com/v2/installation/">Vagrant documentation</a> and the <a href="http://www.ansibleworks.com/docs/gettingstarted.html#getting-ansible">Ansible documentation</a> for installation instructions. Once installed, the following will start and provision a virtual machine.</p>

<pre><code>$ vagrant up
$ vagrant provision
</code></pre>

<p>To access the virtual machine itself, simply...</p>

<pre><code>$ vagrant ssh
</code></pre>

<p>When running via Vagrant, the application is automatically started on port 8888 on 192.168.100.100, i.e.</p>

<pre><code>http://192.168.100.100:8888/
</code></pre>

<h1>
<a id="running" class="anchor" href="#running" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Running</h1>

<p>To run the application, issue the following command</p>

<pre><code>$ python -m pilbox.app
</code></pre>

<p>By default, this will run the application on port 8888 and can be accessed by visiting:</p>

<pre><code>http://localhost:8888/
</code></pre>

<p>To see a list of all available options, run</p>

<pre><code>$ python -m pilbox.app --help
Usage: pilbox/app.py [OPTIONS]

Options:

  --allowed_hosts            list of allowed hosts (default [])
  --allowed_operations       list of allowed operations (default [])
  --background               default hexadecimal bg color (RGB or ARGB)
  --client_key               client key
  --client_name              client name
  --config                   path to configuration file
  --content_type_from_image  override content type using image mime type
  --debug                    run in debug mode (default False)
  --expand                   default to expand when rotating
  --filter                   default filter to use when resizing
  --help                     show this help information
  --implicit_base_url        prepend protocol/host to url paths
  --max_requests             max concurrent requests (default 40)
  --operation                default operation to perform
  --optimize                 default to optimize when saving
  --port                     run on the given port (default 8888)
  --position                 default cropping position
  --progressive              default to progressive when saving
  --proxy_host               proxy hostname
  --proxy_port               proxy port
  --quality                  default jpeg quality, 0-100 or keep
  --timeout                  timeout of requests in seconds (default 10)
  --validate_cert            validate certificates (default True)
</code></pre>

<h1>
<a id="calling" class="anchor" href="#calling" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Calling</h1>

<p>To use the image processing service, include the application url as you would any other image. E.g. this image url</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">img</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>http://i.imgur.com/zZ8XmBA.jpg<span class="pl-pds">"</span></span> /&gt;</pre></div>

<p>Would be replaced with this image url</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">img</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>http://localhost:8888/?url=http%3A%2F%2Fi.imgur.com%2FzZ8XmBA.jpg<span class="pl-ii">&amp;</span>w=300<span class="pl-ii">&amp;</span>h=300<span class="pl-ii">&amp;</span>mode=crop<span class="pl-pds">"</span></span> /&gt;</pre></div>

<p>This will request the image served at the supplied url and resize it to <code>300x300</code> using the <code>crop</code> mode. The below is the list of parameters that can be supplied to the service.</p>

<h2>
<a id="general-parameters" class="anchor" href="#general-parameters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>General Parameters</h2>

<ul>
<li>
<em>url</em>: The url of the image to be resized</li>
<li>
<em>op</em>: The operation to perform: noop, resize (default), rotate

<ul>
<li>
<em>noop</em>: No operation is performed, image is returned as it is received</li>
<li>
<em>region</em>: Select a sub-region from the image</li>
<li>
<em>resize</em>: Resize the image</li>
<li>
<em>rotate</em>: Rotate the image</li>
</ul>
</li>
<li>
<em>fmt</em>: The output format to save as, defaults to the source format

<ul>
<li>
<em>gif</em>: Save as GIF</li>
<li>
<em>jpeg</em>: Save as JPEG</li>
<li>
<em>png</em>: Save as PNG</li>
<li>
<em>tiff</em>: Save as TIFF</li>
<li>
<em>webp</em>: Save as WebP</li>
</ul>
</li>
<li>
<em>bg</em>: Background color used with images that have transparency; useful when saving to a format that does not support transparency

<ul>
<li>
<em>RGB</em>: 3- or 6-digit hexadecimal number</li>
<li>
<em>ARGB</em>: 4- or 8-digit hexadecimal number, only relevant for PNG images</li>
</ul>
</li>
<li>
<em>opt</em>: The output should be optimized, only relevant to JPEGs and PNGs</li>
<li>
<em>exif</em>: Keep original <a href="http://en.wikipedia.org/wiki/Exchangeable_image_file_format">Exif</a> data in the processed image, only relevant for JPEG</li>
<li>
<em>prog</em>: Enable progressive output, only relevant to JPEGs</li>
<li>
<em>q</em>: The quality, (1-99) or keep, used to save the image, only relevant to JPEGs</li>
</ul>

<h2>
<a id="resize-parameters" class="anchor" href="#resize-parameters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Resize Parameters</h2>

<ul>
<li>
<em>w</em>: The desired width of the image</li>
<li>
<em>h</em>: The desired height of the image</li>
<li>
<em>mode</em>: The resizing method: adapt, clip, crop (default), fill and scale

<ul>
<li>
<em>adapt</em>: Resize using crop if the resized image retains a supplied percentage of the original image; otherwise fill</li>
<li>
<em>clip</em>: Resize to fit within the desired region, keeping aspect ratio</li>
<li>
<em>crop</em>: Resize so one dimension fits within region, center, cut remaining</li>
<li>
<em>fill</em>: Fills the clipped space with a background color</li>
<li>
<em>scale</em>: Resize to fit within the desired region, ignoring aspect ratio</li>
</ul>
</li>
<li>
<em>bg</em>: Background color used with fill mode (RGB or ARGB)

<ul>
<li>
<em>RGB</em>: 3- or 6-digit hexadecimal number</li>
<li>
<em>ARGB</em>: 4- or 8-digit hexadecimal number, only relevant for PNG images</li>
</ul>
</li>
<li>
<em>filter</em>: The filtering algorithm used for resizing

<ul>
<li>
<em>nearest</em>: Fastest, but often images appear pixelated</li>
<li>
<em>bilinear</em>: Faster, can produce acceptable results</li>
<li>
<em>bicubic</em>: Fast, can produce acceptable results</li>
<li>
<em>antialias</em>: Slower, produces the best results</li>
</ul>
</li>
<li>
<em>pos</em>: The crop position

<ul>
<li>
<em>top-left</em>: Crop from the top left</li>
<li>
<em>top</em>: Crop from the top center</li>
<li>
<em>top-right</em>: Crop from the top right</li>
<li>
<em>left</em>: Crop from the center left</li>
<li>
<em>center</em>: Crop from the center</li>
<li>
<em>right</em>: Crop from the center right</li>
<li>
<em>bottom-left</em>: Crop from the bottom left</li>
<li>
<em>bottom</em>: Crop from the bottom center</li>
<li>
<em>bottom-right</em>: Crop from the bottom right</li>
<li>
<em>face</em>: Identify faces and crop from the midpoint of their position(s)</li>
<li>
<em>x,y</em>: Custom center point position ratio, e.g. 0.0,0.75</li>
</ul>
</li>
<li>
<em>retain</em>: The minimum percentage (1-99) of the original image that must still be visible in the resized image in order to use crop mode</li>
</ul>

<h2>
<a id="region-parameters" class="anchor" href="#region-parameters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Region Parameters</h2>

<ul>
<li>
<em>rect</em>: The region as x,y,w,h; x,y: top-left position, w,h: width/height of region</li>
</ul>

<h2>
<a id="rotate-parameters" class="anchor" href="#rotate-parameters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Rotate Parameters</h2>

<ul>
<li>
<em>deg</em>: The desired rotation angle degrees

<ul>
<li>0-359: The number of degrees to rotate (clockwise)</li>
<li>auto: Auto rotation based on EXIF orientation, only relevant to JPEGs</li>
</ul>
</li>
<li>
<em>expand</em>: Expand the size to include the full rotated image</li>
</ul>

<h2>
<a id="security-related-parameters" class="anchor" href="#security-related-parameters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Security-related Parameters</h2>

<ul>
<li>
<em>client</em>: The client name</li>
<li>
<em>sig</em>: The signature</li>
</ul>

<p>The <code>url</code> parameter is always required as it dictates the image that will be manipulated. <code>op</code> is optional and defaults to <code>resize</code>. It also supports a comma separated list of operations, where each operation is applied in the order that it appears in the list. Depending on the operation, additional parameters are required.  All image manipulation requests accept <code>fmt</code>, <code>opt</code> and <code>q</code>. <code>fmt</code> is optional and defaults to the source image format. <code>opt</code> is optional and defaults to <code>0</code>.  <code>q</code> is optional and defaults to <code>90</code>. To ensure security, all requests also support, <code>client</code> and <code>sig</code>. <code>client</code> is required only if the <code>client_name</code> is defined within the configuration file. Likewise, <code>sig</code> is required only if the <code>client_key</code> is defined within the configuration file. See the <a href="#signing">signing section</a> for details on how to generate the signature.</p>

<p>For resizing, either the <code>w</code> or <code>h</code> parameter is required. If only one dimension is specified, the application will determine the other dimension using the aspect ratio. <code>mode</code> is optional and defaults to <code>crop</code>. <code>filter</code> is optional and defaults to <code>antialias</code>.  <code>bg</code> is optional and defaults to <code>fff</code>. <code>pos</code> is optional and defaults to <code>center</code>. <code>retain</code> is optional and defaults to <code>75</code>.</p>

<p>For region sub-selection, <code>rect</code> is required. For rotating, <code>deg</code> is required. <code>expand</code> is optional and defaults to <code>0</code> (disabled). It is recommended that this feature not be used as it typically does not produce high quality images.</p>

<p>Note, all built-in defaults can be overridden by setting them in the configuration file. See the <a href="#configuration">configuration section</a> for more details.</p>

<h1>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Examples</h1>

<p>The following images show the various resizing modes in action for an original image size of <code>640x428</code> that is being resized to <code>500x400</code>.</p>

<h2>
<a id="clip" class="anchor" href="#clip" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Clip</h2>

<p>The image is resized to fit within a <code>500x400</code> box, maintaining aspect ratio and producing an image that is <code>500x334</code>. Clipping is useful when no portion of the image can be lost and it is acceptable that the image not be exactly the supplied dimensions, but merely fit within the dimensions.</p>

<p><img src="https://github.com/agschwender/pilbox/raw/master/pilbox/test/data/expected/example-500x400-mode=clip.jpg" alt="Clipped image"></p>

<h2>
<a id="crop" class="anchor" href="#crop" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Crop</h2>

<p>The image is resized so that one dimension fits within the <code>500x400</code> box. It is then centered and the excess is cut from the image. Cropping is useful when the position of the subject is known and the image must be exactly the supplied size.</p>

<p><img src="https://github.com/agschwender/pilbox/raw/master/pilbox/test/data/expected/example-500x400-mode=crop.jpg" alt="Cropped image"></p>

<h2>
<a id="fill" class="anchor" href="#fill" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Fill</h2>

<p>Similar to clip, fill resizes the image to fit within a <code>500x400</code> box. Once clipped, the image is centered within the box and all left over space is filled with the supplied background color. Filling is useful when no portion of the image can be lost and it must be exactly the supplied size.</p>

<p><img src="https://github.com/agschwender/pilbox/raw/master/pilbox/test/data/expected/example-500x400-mode=fill-background=ccc.jpg" alt="Filled image"></p>

<h2>
<a id="scale" class="anchor" href="#scale" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Scale</h2>

<p>The image is clipped to fit within the <code>500x400</code> box and then stretched to fill the excess space. Scaling is often not useful in production environments as it generally produces poor quality images. This mode is largely included for completeness.</p>

<p><img src="https://github.com/agschwender/pilbox/raw/master/pilbox/test/data/expected/example-500x400-mode=scale.jpg" alt="Scale image"></p>

<h1>
<a id="testing" class="anchor" href="#testing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Testing</h1>

<p>To run all tests, issue the following command</p>

<pre><code>$ python -m pilbox.test.runtests
</code></pre>

<p>To run individual tests, simply indicate the test to be run, e.g.</p>

<pre><code>$ python -m pilbox.test.runtests pilbox.test.signature_test
</code></pre>

<h1>
<a id="signing" class="anchor" href="#signing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Signing</h1>

<p>In order to secure requests so that unknown third parties cannot easily use the resize service, the application can require that requests provide a signature. To enable this feature, set the <code>client_key</code> option. The signature is a hexadecimal digest generated from the client key and the query string using the HMAC-SHA1 message authentication code (MAC) algorithm. The below python code provides an example implementation.</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">import</span> hashlib
<span class="pl-k">import</span> hmac

<span class="pl-k">def</span> <span class="pl-en">derive_signature</span>(<span class="pl-smi">key</span>, <span class="pl-smi">qs</span>):
    m <span class="pl-k">=</span> hmac.new(key, <span class="pl-c1">None</span>, hashlib.sha1)
    m.update(qs)
    <span class="pl-k">return</span> m.hexdigest()</pre></div>

<p>The signature is passed to the application by appending the <code>sig</code> parameter to the query string; e.g. <code>x=1&amp;y=2&amp;z=3&amp;sig=c9516346abf62876b6345817dba2f9a0c797ef26</code>. Note, the application does not include the leading question mark when verifying the supplied signature. To verify your signature implementation, see the <code>pilbox.signature</code> command described in the <a href="#tools">tools section</a>.</p>

<h1>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h1>

<p>All options that can be supplied to the application via the command line, can also be specified in the configuration file. Configuration files are simply python files that define the options as variables. The below is an example configuration.</p>

<pre><code># General settings
port = 8888

# Set client name and key if the application requires signed requests. The
# client must sign the request using the client_key, see README for
# instructions.
client_name = "sample"
client_key = "3NdajqH8mBLokepU4I2Bh6KK84GUf1lzjnuTdskY"

# Set the allowed hosts as an alternative to signed requests. Only those
# images which are served from the following hosts will be requested.
allowed_hosts = ["localhost"]

# Request-related settings
max_requests = 50
timeout = 7.5

# Set default resizing options
background = "ccc"
filter = "bilinear"
mode = "crop"
position = "top"

# Set default rotating options
expand = False

# Set default saving options
format = None
optimize = 1
quality = 90
</code></pre>

<h1>
<a id="tools" class="anchor" href="#tools" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Tools</h1>

<p>To verify that your client application is generating correct signatures, use the signature command.</p>

<pre><code>$ python -m pilbox.signature --key=abcdef "x=1&amp;y=2&amp;z=3"
Query String: x=1&amp;y=2&amp;z=3
Signature: c9516346abf62876b6345817dba2f9a0c797ef26
Signed Query String: x=1&amp;y=2&amp;z=3&amp;sig=c9516346abf62876b6345817dba2f9a0c797ef26
</code></pre>

<p>The application allows the use of the resize functionality via the command line.</p>

<pre><code>$ python -m pilbox.image --width=300 --height=300 http://i.imgur.com/zZ8XmBA.jpg &gt; /tmp/foo.jpg
</code></pre>

<p>If a new mode is added or a modification was made to the libraries that would change the current expected output for tests, run the generate test command to regenerate the expected output for the test cases.</p>

<pre><code>$ python -m pilbox.test.genexpected
</code></pre>

<h1>
<a id="deploying" class="anchor" href="#deploying" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Deploying</h1>

<p>The application itself does not include any caching. It is recommended that the application run behind a CDN for larger applications or behind varnish for smaller ones.</p>

<p>Defaults for the application have been optimized for quality rather than performance. If you wish to get higher performance out of the application, it is recommended you use a less computationally expensive filtering algorithm and a lower JPEG quality. For example, add the following to the configuration.</p>

<pre><code># Set default resizing options
filter = "bicubic"
quality = 75
</code></pre>

<h1>
<a id="extension" class="anchor" href="#extension" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Extension</h1>

<p>While it is generally recommended to use Pilbox as a standalone server, it can also be used as a library. To extend from it and build a custom image processing server, use the following example.</p>

<pre><code>#!/usr/bin/env python

import tornado.gen

from pilbox.app import PilboxApplication, ImageHandler, main


class CustomApplication(PilboxApplication):
    def get_handlers(self):
        return [(r"/(\d+)x(\d+)/(.+)", CustomImageHandler)]


class CustomImageHandler(ImageHandler):
    def prepare(self):
        self.args = self.request.arguments.copy()

    @tornado.gen.coroutine
    def get(self, w, h, url):
        self.args.update(dict(w=w, h=h, url=url))

        self.validate_request()
        resp = yield self.fetch_image()
        self.render_image(resp)

    def get_argument(self, name, default=None):
        return self.args.get(name, default)


if __name__ == "__main__":
    main(app=CustomApplication())
</code></pre>

<h1>
<a id="changelog" class="anchor" href="#changelog" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Changelog</h1>

<ul>
<li>0.1: Image resizing fit</li>
<li>0.1.1: Image cropping</li>
<li>0.1.2: Image scaling</li>
<li>0.2: Configuration integration</li>
<li>0.3: Signature generation</li>
<li>0.3.1: Signature command-line tool</li>
<li>0.4: Image resize command-line tool</li>
<li>0.5: Facial recognition cropping</li>
<li>0.6: Fill resizing mode</li>
<li>0.7: Resize using crop position</li>
<li>0.7.1: Resize using a single dimension, maintaining aspect ratio</li>
<li>0.7.2: Added filter and quality options</li>
<li>0.7.3: Support python 3</li>
<li>0.7.4: Fixed cli for image generation</li>
<li>0.7.5: Write output in 16K blocks</li>
<li>0.8: Added support for ARGB (alpha-channel)</li>
<li>0.8.1: Increased max clients and write block sizes</li>
<li>0.8.2: Added configuration for max clients and timeout</li>
<li>0.8.3: Only allow http and https protocols</li>
<li>0.8.4: Added support for WebP</li>
<li>0.8.5: Added format option and configuration overrides for mode and format</li>
<li>0.8.6: Added custom position support</li>
<li>0.9: Added rotate operation</li>
<li>0.9.1: Added sub-region selection operation</li>
<li>0.9.4: Added Pilbox as a PyPI package</li>
<li>0.9.10: Converted README to reStructuredText</li>
<li>0.9.14: Added Sphinx docs</li>
<li>0.9.15: Added implicit base url to configuration</li>
<li>0.9.16: Added validate cert to configuration</li>
<li>0.9.17: Added support for GIF format</li>
<li>0.9.18: Fix for travis builds on python 2.6 and 3.3</li>
<li>0.9.19: Validate cert fix</li>
<li>0.9.20: Added optimize option</li>
<li>0.9.21: Added console script entry point</li>
<li>1.0.0: Modified for easier library usage</li>
<li>1.0.1: Added allowed operations and default operation</li>
<li>1.0.2: Modified to allow override of http content type</li>
<li>1.0.3: Safely catch image save errors</li>
<li>1.0.4: Added progressive option</li>
<li>1.1.0: Proxy server support</li>
<li>1.1.1: Added JPEG auto rotation based on EXIF orientation</li>
<li>1.1.2: Added keep JPEG quality option and set JPEG subsampling to keep</li>
<li>1.1.3: Fix auto rotation on JPEG with missing EXIF data</li>
<li>1.1.4: Exception handling around invalid EXIF data</li>
<li>1.1.5: Fix image requests without content types</li>
<li>1.1.6: Support custom applications that need command line arguments</li>
<li>1.1.7: Support adapt resize mode</li>
<li>1.1.8: Add preserve Exif flag</li>
<li>1.1.9: Increase Pillow version to 2.8.1</li>
<li>1.1.10: Add ca_certs option</li>
<li>1.1.11: Added support for TIFF</li>
<li>1.2.0: Support setting background when saving a transparent image

<ul>
<li>
<em>Backwards incompatible</em>: default background property changed to <code>0fff</code>. To restore previous behavior, set background in config to <code>ffff</code>.</li>
</ul>
</li>
</ul>

<h1>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>TODO</h1>

<ul>
<li>How to reconcile unavailable color profiles?</li>
<li>Add backends (S3, file system, etc...) if necessary</li>
</ul>
        </section>

        <footer>
          Pilbox is maintained by <a href="https://github.com/agschwender">agschwender</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-8326371-5");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

      </div>
    </div>
  </body>
</html>
